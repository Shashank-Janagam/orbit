<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Device Fingerprint</title>
</head>
<body>
    <h1>Device Fingerprint</h1>
    <div id="fingerprint"></div>
    <script>
        // Utility function to create a hash from a string
        function hashString(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                hash = (hash << 5) - hash + str.charCodeAt(i);
                hash |= 0; // Convert to 32bit integer
            }
            return hash;
        }

        // Canvas Fingerprinting
        function generateCanvasFingerprint() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            ctx.textBaseline = "top";
            ctx.font = "14px 'Arial'";
            ctx.fillText('Hello World!', 2, 2);
            const data = canvas.toDataURL();
            return hashString(data);
        }

        // WebGL Fingerprinting
        function getWebGLFingerprint() {
            const canvas = document.createElement('canvas');
            const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
            const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
            const renderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
            const vendor = gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL);
            return hashString(renderer + vendor);
        }

        // Font Enumeration
        function getInstalledFonts() {
            const fonts = [
                "Arial", "Verdana", "Courier New", "Georgia", "Times New Roman", "Tahoma", "Trebuchet MS"
            ];
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            ctx.textBaseline = "top";
            ctx.font = "72px sans-serif";
            const detectedFonts = fonts.filter(font => {
                ctx.font = `72px ${font}`;
                const width = ctx.measureText("abcdefghijklmnopqrstuvwxyz").width;
                return width !== 0;
            });
            return detectedFonts.join(',');
        }

        // Gathering all data for fingerprint
        function generateFingerprint() {
            const userAgent = navigator.userAgent;
            const platform = navigator.platform;
            const screenRes = `${screen.width}x${screen.height}`;
            const fonts = getInstalledFonts();
            const canvasFingerprint = generateCanvasFingerprint();
            const webglFingerprint = getWebGLFingerprint();

            const fingerprintData = `${userAgent}-${platform}-${screenRes}-${fonts}-${canvasFingerprint}-${webglFingerprint}`;
            return hashString(fingerprintData);
        }

        // Display fingerprint
        const fingerprint = generateFingerprint();
        document.getElementById('fingerprint').innerText = 'Device Fingerprint: ' + fingerprint;
        console.log('Device Fingerprint:', fingerprint);
    </script>
</body>
</html>
